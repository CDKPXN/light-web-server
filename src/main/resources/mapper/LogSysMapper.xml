<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.company.project.dao.LogSysMapper">
  <resultMap id="BaseResultMap" type="com.company.project.model.LogSys">
    <!--
      WARNING - @mbg.generated
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="num" jdbcType="VARCHAR" property="num" />
    <result column="content" jdbcType="VARCHAR" property="content" />
    <result column="ipaddress" jdbcType="VARCHAR" property="ipaddress" />
    <result column="operator" jdbcType="VARCHAR" property="operator" />
    <result column="ctime" jdbcType="TIMESTAMP" property="ctime" />
    <result column="result" jdbcType="VARCHAR" property="result" />
  </resultMap>
  
  <sql id="BaseSql">
  		select 
  		     id,num,content,ipaddress,operator,result,ctime
  		from
  		      log_sys  
  
  </sql>
  
  <select id="findByFilter" resultMap="BaseResultMap">
  	<include refid="BaseSql"></include>
     <where>
        <if test="startTime != null">
        	and ctime &gt;= #{startTime}
        </if>
        <if test="endTime != null">
        	and ctime &lt;= date_add(#{endTime},interval 1 day)
        </if>
        <if test="searchContent != null">
         	and (num like CONCAT('%',#{searchContent},'%')
         	or operator like CONCAT('%',#{searchContent},'%'))
        </if>
     
     
     </where>
     order by id desc
  </select>
</mapper>