<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.company.project.dao.DevicedataMapper">
  <resultMap id="BaseResultMap" type="com.company.project.model.Devicedata">
    <!--
      WARNING - @mbg.generated
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="source" jdbcType="VARCHAR" property="source" />
    <result column="target" jdbcType="VARCHAR" property="target" />
    <result column="data_type" jdbcType="INTEGER" property="dataType" />
    <result column="content" jdbcType="VARCHAR" property="content" />
    <result column="ctime" jdbcType="TIMESTAMP" property="ctime" />
    <result column="is_del" jdbcType="TINYINT" property="isDel" />
    <result column="result" jdbcType="VARCHAR" property="result" />
  </resultMap>
  
  <sql id="BaseSql">
       select 
              id,source,target,data_type,content,ctime,result
       from
              devicedata
  </sql>
  
  <select id="findAllData" resultMap="BaseResultMap" >
        <include refid="BaseSql"></include>
         <where>
               <if test="dataType!=null">
                      and data_type = #{dataType} 
               </if>
               <if test="startTime!=null ">
                      and ctime &gt;=  #{startTime}
               </if>
               <if test="endTime!=null ">
                       and ctime &lt;=  date_add(#{endTime},interval 1 day)
               </if>
               <if test="sourceOrTarger!=null and sourceOrTarger!=''">
                   and (source like CONCAT('%',#{sourceOrTarger},'%') 
                   or target like CONCAT('%',#{sourceOrTarger},'%'))
               </if>
              
         </where>
         
  </select>
</mapper>